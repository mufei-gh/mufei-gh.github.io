<!DOCTYPE html><html itemscope itemtype="http://schema.org/WebPage" lang="en"><head><meta content="text/html;charset=utf-8" http-equiv="content-type"><meta content="IE=edge" http-equiv="X-UA-Compatible"><meta content="width=device-width,initial-scale=1" name="viewport" id="viewport"><meta content="#ffffff" name="msapplication-TileColor"><meta content="#ffffff" name="theme-color"><link href="/" rel="canonical"><link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet"><link href="logo.ico" rel="shortcut icon" type="image/x_icon"><link href="/static/css/main.079761c0.chunk.css" rel="stylesheet"><link href="https://fonts.googleapis.com" rel="preconnect"><script src="/static/js/7.b9a12449.chunk.js" charset="utf-8"></script><script src="/static/js/3.1d8bc47f.chunk.js" charset="utf-8"></script><title>Mufei Chen</title><link href="https://www.google-analytics.com" rel="preconnect"><link href="https://fonts.gstatic.com" rel="preconnect"></head><body><div id="root"><div><div class="blog"><div class="full-width emotionVisualization flex-center"><div class="full-width no-margin arrow-container"><a class="arrow-icon" href="/work"><svg class="" fill="none" height="38" viewBox="0 0 64 38" width="64" xmlns="http://www.w3.org/2000/svg"><path d="M1.23223 17.2322C0.255922 18.2085 0.255922 19.7915 1.23223 20.7678L17.1421 36.6777C18.1184 37.654 19.7014 37.654 20.6777 36.6777C21.654 35.7014 21.654 34.1184 20.6777 33.1421L6.53553 19L20.6777 4.85786C21.654 3.88155 21.654 2.29864 20.6777 1.32233C19.7014 0.34602 18.1184 0.34602 17.1421 1.32233L1.23223 17.2322ZM64 16.5L3 16.5V21.5L64 21.5V16.5Z" fill="#481074"></path></svg></a></div><div class="blog-container"><div class="titleName">Emotion Visualization</div><div class="subtitle">Deep Learning Data Analysis</div><div class="title">Introduction</div><p class="regular-text undefined">Emotion Visualization is a project to visualize users’ emotional changes across one year scope by analyzing tweets posted by users. I first generated this idea because I felt bored quarantining at home during the COVID 19 pandemic and wanted to record my mood using colors to light up the dull life. The initial idea was to develop a journal on which users can write some words and manually choose their mood for the day. It ends up with the idea that a language model can analyze posts and generate emotional labels automatically. This project is to achieve this function.<br><br>In this project, I build a model to predict users’ emotions by analyzing their tweets, then generate their emotion chart for a year. A sample interactive website shows the emotion chart of the given user id, aiming to display the effect of the model as a test.</p><img alt=" " class="overallPic" src="/images/projects/emotionV/overall.png"><div class="overall"><p class="regular-text text22-1"></p><ol><li>Train a language model (RoBERTa)</li><li>Fetch tweet text by user id as test data using tweet API</li><li>Predict using the trained model and give each tweet a categorical emotion</li><li>label three categories with numeric values</li></ol><p></p><p class="regular-text text22-2"></p><ol><li>Match each label to a 2D color map by using bilinear interpolation</li><li>Record “emotions of the year” on a website</li></ol><p></p></div><div class="title">Data Preprocessing</div><p class="regular-text line">Tweet text data labelled by three categorical emotions (joy, anger, and sadness)</p><div class="processContainer"><p class="regular-text preprocessWords"></p><ol><li>Misspelled data</li><li>Remove URLS and mentions</li><li>Remove emojis</li><li>Remove empty comments</li><li>Bert encoding and padding</li><li>Train-validation-test split</li></ol><p></p><img alt=" " class="processingPic" src="/images/projects/emotionV/processing.png"></div><div class="title">Model Training</div><div class="modelContainer"><img alt=" " class="robertaPic" src="/images/projects/emotionV/roberta.png"><p class="regular-text roberta">RoBERTa ---a pre-trained BERT model using 850M english tweets<br><br>Dimensions:<br></p><ol><li>Input word ids (batch_size, seq_length)</li><li>RoBERTa model pooler output (batch_size, 768)</li><li>Dense layer output (batch_size, 4)</li></ol><p></p></div><div class="title">Prediction</div><div class="predictionContainer"><p class="regular-text undefined">Three categorical emotions:<br></p><ol><li>Joy</li><li>Anger</li><li>Sadness</li></ol><br>Match the result(labels and values) to the<br>palette on the left.<br>The range of each axis is from -1 to 1.<p></p><img alt=" " class="colorPic" src="/images/projects/emotionV/color.png"></div><div class="title">Visualization</div><img alt=" " class="chartPic" src="/images/projects/emotionV/chart.png"><p class="regular-text lastLine">An example of a user’s mood swings over a year.<br><br></p><p class="regular-text note"></p><div class="color-purple">Note:<br></div>Due to the ethical concerns, the input userId shown in the picture is not the actual username of the twitter account used to generate this emotion chart but a representation of all possible account names.<p></p></div><a class="full-width no-margin" href="/work"><div class="full-width text-center no-margin flex-center back-to-portfolio" style="background:#481074;color:#fff;height:3.54em">Back to Portfolio</div></a></div></div></div></div><script src="https://www.google-analytics.com/analytics.js" async></script><script>!function(e){function r(r){for(var n,a,i=r[0],c=r[1],l=r[2],s=0,p=[];s<i.length;s++)a=i[s],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(f&&f(r);p.length;)p.shift()();return u.push.apply(u,l||[]),t()}function t(){for(var e,r=0;r<u.length;r++){for(var t=u[r],n=!0,i=1;i<t.length;i++){var c=t[i];0!==o[c]&&(n=!1)}n&&(u.splice(r--,1),e=a(a.s=t[0]))}return e}var n={},o={1:0},u=[];function a(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.e=function(e){var r=[],t=o[e];if(0!==t)if(t)r.push(t[2]);else{var n=new Promise((function(r,n){t=o[e]=[r,n]}));r.push(t[2]=n);var u,i=document.createElement("script");i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.src=function(e){return a.p+"static/js/"+({}[e]||e)+"."+{3:"1d8bc47f",4:"743d432e",5:"917fd195",6:"e5b242ce",7:"b9a12449",8:"c5dadf13",9:"af9c2e94"}[e]+".chunk.js"}(e);var c=new Error;u=function(r){i.onerror=i.onload=null,clearTimeout(l);var t=o[e];if(0!==t){if(t){var n=r&&("load"===r.type?"missing":r.type),u=r&&r.target&&r.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+u+")",c.name="ChunkLoadError",c.type=n,c.request=u,t[1](c)}o[e]=void 0}};var l=setTimeout((function(){u({type:"timeout",target:i})}),12e4);i.onerror=i.onload=u,document.head.appendChild(i)}return Promise.all(r)},a.m=e,a.c=n,a.d=function(e,r,t){a.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,r){if(1&r&&(e=a(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)a.d(t,n,function(r){return e[r]}.bind(null,n));return t},a.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(r,"a",r),r},a.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},a.p="/",a.oe=function(e){throw console.error(e),e};var i=this["webpackJsonppersonal-site"]=this["webpackJsonppersonal-site"]||[],c=i.push.bind(i);i.push=r,i=i.slice();for(var l=0;l<i.length;l++)r(i[l]);var f=c;t()}([])</script><script src="/static/js/2.96fd3096.chunk.js"></script><script src="/static/js/main.031184af.chunk.js"></script></body></html>